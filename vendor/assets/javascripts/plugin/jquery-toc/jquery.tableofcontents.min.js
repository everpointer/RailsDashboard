/*! myapp-time - v0.0.1 - 2014-07-18 */!function(a){a.TableOfContents=function(b,c,d){var e=this;return e.$el=a(b),e.el=b,e.toc="",e.listStyle=null,e.tags=["h1","h2","h3","h4","h5","h6"],e.init=function(){e.options=a.extend({},a.TableOfContents.defaultOptions,d),("undefined"==typeof c||null==c)&&(c=document.body),e.$scope=a(c);var b=e.$scope.find(e.tags.join(", ")).filter(":first");if(1==b.length){e.starting_depth=e.options.startLevel,e.options.depth<1&&(e.options.depth=1);var f=e.tags.splice(e.options.startLevel-1,e.options.depth);if(e.$headings=e.$scope.find(f.join(", ")),e.options.topLinks!==!1){var g=a(document.body).attr("id");""==g&&(g=e.options.topBodyId,document.body.id=g),e.topLinkId=g}return e.$el.is("ul")?e.listStyle="ul":e.$el.is("ol")&&(e.listStyle="ol"),e.buildTOC(),e.options.proportionateSpacing!==!0||e.tieredList()||e.addSpacing(),e}},e.tieredList=function(){return"ul"==e.listStyle||"ol"==e.listStyle},e.buildTOC=function(){e.current_depth=e.starting_depth,e.$headings.each(function(a){var b=this.nodeName.toLowerCase().substr(1,1);(a>0||0==a&&b!=e.current_depth)&&e.changeDepth(b),e.toc+=e.formatLink(this,b,a)+"\n",e.options.topLinks!==!1&&e.addTopLink(this)}),e.changeDepth(e.starting_depth,!0),e.tieredList()&&(e.toc="<li>\n"+e.toc+"</li>\n"),e.$el.html(e.toc)},e.addTopLink=function(b){var c=e.options.topLinks===!0?"Top":e.options.topLinks,d=a("<a href='#"+e.topLinkId+"' class='"+e.options.topLinkClass+"'></a>").html(c);a(b).append(d)},e.formatLink=function(b,c){var d=b.id;""==d&&(d=e.buildSlug(a(b).text()),b.id=d);var f="<a href='#"+d+"'";return e.tieredList()||(f+=" class='"+e.depthClass(c)+"'"),f+=">"+e.options.levelText.replace("%",a(b).text())+"</a>"},e.changeDepth=function(a,b){if(b!==!0&&(b=!1),!e.tieredList())return e.current_depth=a,!0;if(a>e.current_depth){for(var c=[],d=e.current_depth;a>d;d++)c.push("<"+e.listStyle+">\n");var f="<li>\n";e.toc+=c.join(f)+f}else if(a<e.current_depth){for(var g=[],d=e.current_depth;d>a;d--)g.push("</"+e.listStyle+">\n");e.toc+="</li>\n"+g.join("</li>\n"),b||(e.toc+="</li>\n<li>\n")}else b||(e.toc+="</li>\n<li>\n");e.current_depth=a},e.buildSlug=function(a){return a=a.toLowerCase().replace(/[^a-z0-9 -]/gi,"").replace(/ /gi,"-"),a=a.substr(0,50)},e.depthClass=function(a){return e.options.levelClass.replace("%",a-(e.starting_depth-1))},e.addSpacing=function(){var b=e.$headings.filter(":first").position().top;e.$headings.each(function(c){var d=e.$el.find("a:eq("+c+")"),f=(a(this).position().top-b)/(e.$scope.height()-b)*e.$el.height();d.css({position:"absolute",top:f})})},e.init()},a.TableOfContents.defaultOptions={startLevel:1,depth:3,levelClass:"toc-depth-%",levelText:"%",topLinks:!1,topLinkClass:"toc-top-link",topBodyId:"toc-top",proportionateSpacing:!1},a.fn.tableOfContents=function(b,c){return this.each(function(){var d=new a.TableOfContents(this,b,c);delete d})}}(jQuery);